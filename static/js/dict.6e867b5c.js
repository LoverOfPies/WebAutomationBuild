(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dict"],{"107c":function(e,t,i){var n=i("d039"),a=i("da84"),l=a.RegExp;e.exports=n((function(){var e=l("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},1276:function(e,t,i){"use strict";var n=i("2ba4"),a=i("c65b"),l=i("e330"),s=i("d784"),r=i("44e7"),o=i("825a"),d=i("1d80"),c=i("4840"),u=i("8aa5"),p=i("50c4"),f=i("577e"),h=i("dc4a"),m=i("4dae"),b=i("14c3"),g=i("9263"),v=i("9f7f"),y=i("d039"),w=v.UNSUPPORTED_Y,x=4294967295,k=Math.min,_=[].push,F=l(/./.exec),C=l(_),I=l("".slice),D=!y((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var i="ab".split(e);return 2!==i.length||"a"!==i[0]||"b"!==i[1]}));s("split",(function(e,t,i){var l;return l="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,i){var l=f(d(this)),s=void 0===i?x:i>>>0;if(0===s)return[];if(void 0===e)return[l];if(!r(e))return a(t,l,e,s);var o,c,u,p=[],h=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),b=0,v=new RegExp(e.source,h+"g");while(o=a(g,v,l)){if(c=v.lastIndex,c>b&&(C(p,I(l,b,o.index)),o.length>1&&o.index<l.length&&n(_,p,m(o,1)),u=o[0].length,b=c,p.length>=s))break;v.lastIndex===o.index&&v.lastIndex++}return b===l.length?!u&&F(v,"")||C(p,""):C(p,I(l,b)),p.length>s?m(p,0,s):p}:"0".split(void 0,0).length?function(e,i){return void 0===e&&0===i?[]:a(t,this,e,i)}:t,[function(t,i){var n=d(this),s=void 0==t?void 0:h(t,e);return s?a(s,t,n,i):a(l,f(n),t,i)},function(e,n){var a=o(this),s=f(e),r=i(l,a,s,n,l!==t);if(r.done)return r.value;var d=c(a,RegExp),h=a.unicode,m=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(w?"g":"y"),g=new d(w?"^(?:"+a.source+")":a,m),v=void 0===n?x:n>>>0;if(0===v)return[];if(0===s.length)return null===b(g,s)?[s]:[];var y=0,_=0,F=[];while(_<s.length){g.lastIndex=w?0:_;var D,E=b(g,w?I(s,_):s);if(null===E||(D=k(p(g.lastIndex+(w?_:0)),s.length))===y)_=u(s,_,h);else{if(C(F,I(s,y,_)),F.length===v)return F;for(var O=1;O<=E.length-1;O++)if(C(F,E[O]),F.length===v)return F;_=y=D}}return C(F,I(s,y)),F}]}),!D,w)},"14c3":function(e,t,i){var n=i("da84"),a=i("c65b"),l=i("825a"),s=i("1626"),r=i("c6b6"),o=i("9263"),d=n.TypeError;e.exports=function(e,t){var i=e.exec;if(s(i)){var n=a(i,e,t);return null!==n&&l(n),n}if("RegExp"===r(e))return a(o,e,t);throw d("RegExp#exec called on incompatible receiver")}},"29a8":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("Title",{attrs:{title:e.localTitle,back:"true"}}),i("b-container",{staticClass:"p-4",attrs:{fluid:""}},[i("b-row",[i("b-col",{attrs:{cols:"12"}},[null==e.mode?i("search-bar",{attrs:{filter:e.searchFilter},on:{filterChange:e.onFilterChange}}):e._e(),0!=e.filtersData.model.length?i("Filters",{ref:"filters",attrs:{filtersData:e.filtersData},on:{applyFilters:e.onApplyFilters,resetFilters:e.onResetFilters,filterLabelChange:e.onFilterLabelChange}}):e._e(),null==e.mode?i("Table",{attrs:{parent:e.parent,itemsData:e.itemsData,fieldsData:e.fieldsData,filter:e.searchFilter,isBusy:e.isBusy,perPage:e.perPage,currentPage:e.currentPage,name:e.name}}):e._e(),i("b-row",[i("b-col",{attrs:{cols:"12",lg:"10",xl:"8"}},[null!=e.mode&&null==e.groupField?i("SelectGroup",{attrs:{items:e.itemsData,fields:e.fieldsData,id:e.id,name:e.name}}):e._e(),null!=e.mode&&null!=e.groupField?i("RadioGroup",{attrs:{items:e.itemsData,groupField:e.groupField,fields:e.fieldsData,id:e.id,name:e.name}}):e._e()],1)],1),null==e.mode?i("b-row",[i("b-col",{attrs:{cols:"8"}},[i("Pagination",{attrs:{rows:e.itemRowsLength,perPage:e.perPage,currentPage:e.currentPage},on:{pageChange:e.onPageChange}})],1),i("b-col",{attrs:{cols:"4"}},[i("add-data-btn",{staticClass:"text-end",attrs:{parent:e.parent,parentId:e.id,readOnly:e.isReadOnly,fields:e.fieldsData.list,fieldsModels:e.fieldsData.models},on:{addNewRow:e.onAddNewRow}})],1)],1):e._e()],1)],1)],1)],1)},a=[],l=i("1da1"),s=i("ade3"),r=i("5530"),o=(i("96cf"),i("99af"),i("b0c0"),i("2f62")),d=i("43b3"),c=i("688b"),u=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-row",{staticClass:"mb-4"},[i("b-col",[i("b-row",e._l(e.filtersData.model,(function(t){return i("b-col",{key:t.id,staticClass:"mb-2",attrs:{cols:"12"}},[i("router-link",{attrs:{to:{name:"dict",params:{name:t.key,title:t.multiple}}}},[i("b-button",{staticClass:"w-100"},[e._v(e._s(t.multiple))])],1)],1)})),1)],1),i("b-col",{staticClass:"text-end",attrs:{cols:"8"}},[i("b-row",e._l(e.filtersData.model,(function(t,n){return i("b-col",{key:t.id,staticClass:"mb-2",attrs:{cols:"12"}},[i("b-row",[i("b-col",{staticClass:"position-relative",attrs:{cols:"6"}},[i("label",{staticClass:"text-end lh-lg"},[e._v(e._s(t.label)+":")])]),i("b-col",[i("change-field-modal",{ref:"filter-field-"+t.key,refInFor:!0,attrs:{label:t.text,model:t.key,disabled:t.disabled,resetBtn:!0,rowId:n,items:e.getModelItems(t.key),"no-truncate":!0},on:{updateField:e.onUpdateField,labelChange:e.onLabelChange,resetFilters:e.onResetFilters}})],1)],1)],1)})),1)],1)],1)},p=[],f=(i("7db0"),i("d3b7"),i("c740"),i("4de4"),i("d6cf")),h={components:{ChangeFieldModal:f["a"]},props:["filtersData"],methods:{onUpdateField:function(e){var t=e.id,i=e.fields;this.$emit("applyFilters",{id:t,fields:i})},onLabelChange:function(e){var t=e.id,i=e.model;this.$emit("filterLabelChange",{itemId:t,model:i})},onResetFilters:function(e){this.$emit("resetFilters",e)},getFieldById:function(e,t,i){return this.filtersData.list[t].find((function(t){return t.id==e}))[i]},getModelItems:function(e){var t=this,i=this.filtersData.list[e],n=this.filtersData.model.findIndex((function(t){return t.key==e}));if(0!=n){var a=this.filtersData.model[n-1].key;this.filtersData.state[a]&&""!=this.filtersData.state[a]&&(i=this.filtersData.list[e].filter((function(e){return e[a]==t.filtersData.state[a]})))}return i}}},m=h,b=i("2877"),g=Object(b["a"])(m,u,p,!1,null,null,null),v=g.exports,y=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-row",[i("b-col",[i("b-table",{staticClass:"text-nowrap",attrs:{id:"table",items:e.itemsData.list,fields:e.localFields,"per-page":e.perPage,"current-page":e.currentPage,busy:e.isBusy,filter:e.filter,"sort-desc":e.SDesc,"sort-by":"id","head-variant":"light",bordered:"",responsive:"","show-empty":""},on:{"update:sortDesc":function(t){e.SDesc=t},"update:sort-desc":function(t){e.SDesc=t}},scopedSlots:e._u([e._l(e.fieldsData.list,(function(t){return{key:"cell("+t.key+")",fn:function(n){return[i("span",{key:t.key},["boolean"==n.field.type?i("boolean-field",{attrs:{state:n.item[t.key],field:t.key,rowId:n.item.id,isEditable:!0},on:{updateField:e.onUpdateField}}):"float"==n.field.type?i("float-field",{attrs:{model:n.item[t.key],field:t.key,rowId:n.item.id,isEditable:!0},on:{updateField:e.onUpdateField}}):"integer"==n.field.type?i("int-field",{attrs:{model:n.item[t.key],field:t.key,rowId:n.item.id,isEditable:!0},on:{updateField:e.onUpdateField}}):"date"==n.field.type?i("date-field",{attrs:{value:n.item[t.key],field:t.key,rowId:n.item.id,isEditable:!0},on:{updateField:e.onUpdateField}}):"selectable"==n.field.type?i("change-field-modal",{staticClass:"mx-2",attrs:{label:e.getFieldById(n.item[t.key],t.key,"name"),model:t.key,rowId:n.item.id,items:e.fieldsData.models[t.key]},on:{updateField:e.onUpdateField}}):i("text-field",{attrs:{value:n.item[t.key],field:t.key,rowId:n.item.id,isEditable:!0},on:{updateField:e.onUpdateField}})],1)]}}})),{key:"cell(name)",fn:function(t){return[i("text-field",{attrs:{field:"name",width:"350",fieldType:"textarea",value:t.item["name"],rowId:t.item.id,isEditable:!0},on:{updateField:e.onUpdateField}})]}},{key:"cell(actions)",fn:function(t){return[i("div",{staticClass:"mx-2"},e._l(e.itemsData.actions,(function(n){return i("span",{key:n.id},["route"==n.action?i("router-link",{attrs:{to:e.name+"/"+n.to+"/"+t.item.id}},[i("b-button",{staticClass:"mr-2"},[e._v(e._s(n.label))])],1):e._e(),"delete"==n.action?i("delete-row-btn",{attrs:{label:n.label,rowId:t.item.id},on:{deleteRow:e.onDeleteRow}}):e._e()],1)})),0)]}},{key:"table-busy",fn:function(){return[i("div",{staticClass:"text-center my-2"},[i("b-spinner",{staticClass:"align-middle me-2"}),i("strong",[e._v("Загрузка...")])],1)]},proxy:!0}],null,!0)})],1)],1)},w=[],x=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{class:e.isEditable?"cell-padding":""},[i("b-form-checkbox",{attrs:{value:e.checked,"unchecked-value":e.unchecked,disabled:e.readOnly,size:"lg"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1)])},k=[],_={props:["model","readOnly","state","isEditable","field","rowId"],data:function(){return{input:!(null===this||void 0===this||!this.state)&&this.state,checked:!0,unchecked:!1}},watch:{input:function(e){var t={field:null!==this&&void 0!==this&&this.field?this.field:this.model,value:e};this.$emit("updateField",{id:null!==this&&void 0!==this&&this.rowId?this.rowId:-1,fields:t})}}},F=_,C=Object(b["a"])(F,x,k,!1,null,null,null),I=C.exports,D=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.isEditable?i("div",{staticClass:"position-relative"},[i("div",{staticClass:"text d-flex align-items-center"},[i("span",{staticClass:"me-2"},[e._v(e._s(e.model))]),i("b-icon",{staticClass:"cursor-pointer",attrs:{icon:"pencil-square"},on:{click:function(t){return e.showChangeInput(!0)}}})],1),e.editing?i("b-card",{staticClass:"edit-popup shadow",attrs:{"no-body":""}},[i("b-card-header",{staticClass:"d-flex justify-content-between align-items-center"},[i("div",{staticClass:"me-4"},[e._v("Редактирование")]),i("div",[i("b-button",{staticClass:"pill-equal-padding me-2",attrs:{variant:"success",pill:""},on:{click:e.updateField}},[i("b-icon",{attrs:{icon:"check"}})],1),i("b-button",{staticClass:"pill-equal-padding",attrs:{variant:"danger",pill:""},on:{click:function(t){return e.showChangeInput(!1)}}},[i("b-icon",{attrs:{icon:"x"}})],1)],1)]),i("b-form-input",{staticClass:"border-white",attrs:{type:"number",step:"any",placeholder:"Введите число",value:e.input,"no-wheel":!0},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1):e._e()],1):i("span",[i("b-form-input",{attrs:{type:"number",step:"any",placeholder:"Введите число","no-wheel":!0},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1)])},E=[],O={props:["model","isEditable","field","rowId","readOnly"],data:function(){return{editing:!1,input:""}},methods:{showChangeInput:function(e){this.input=this.model,this.editing=e},updateField:function(){var e={field:this.field,value:this.input};this.$emit("updateField",{id:this.rowId,fields:e}),this.showChangeInput(!1)}},watch:{input:function(e){if(null===this||void 0===this||!this.isEditable){var t={field:this.model,value:e};this.$emit("updateField",{id:-1,fields:t})}}}},R=O,j=Object(b["a"])(R,D,E,!1,null,null,null),P=j.exports,S=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.isEditable?i("div",{staticClass:"position-relative"},[i("div",{staticClass:"text d-flex align-items-center"},[i("span",{staticClass:"me-2"},[e._v(e._s(e.model))]),i("b-icon",{staticClass:"cursor-pointer",attrs:{icon:"pencil-square"},on:{click:function(t){return e.showChangeInput(!0)}}})],1),e.editing?i("b-card",{staticClass:"edit-popup shadow",attrs:{"no-body":""}},[i("b-card-header",{staticClass:"d-flex justify-content-between align-items-center"},[i("div",{staticClass:"me-4"},[e._v("Редактирование")]),i("div",[i("b-button",{staticClass:"pill-equal-padding me-2",attrs:{variant:"success",pill:""},on:{click:e.updateField}},[i("b-icon",{attrs:{icon:"check"}})],1),i("b-button",{staticClass:"pill-equal-padding",attrs:{variant:"danger",pill:""},on:{click:function(t){return e.showChangeInput(!1)}}},[i("b-icon",{attrs:{icon:"x"}})],1)],1)]),i("b-form-input",{staticClass:"border-white",attrs:{type:"number",step:"1",placeholder:"Введите целое число","no-wheel":!0,value:e.input},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1):e._e()],1):i("span",[i("b-form-input",{attrs:{placeholder:"Введите целое число",type:"number",step:"1","no-wheel":!0},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1)])},M=[],$={props:["model","isEditable","field","rowId","readOnly"],data:function(){return{editing:!1,input:""}},methods:{showChangeInput:function(e){this.input=this.model,this.editing=e},updateField:function(){var e={field:this.field,value:this.input};this.$emit("updateField",{id:this.rowId,fields:e}),this.showChangeInput(!1)}},watch:{input:function(e){if(null===this||void 0===this||!this.isEditable){var t={field:this.model,value:e};this.$emit("updateField",{id:-1,fields:t})}}}},T=$,U=Object(b["a"])(T,S,M,!1,null,null,null),A=U.exports,B=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.isEditable?i("div",{staticClass:"position-relative"},[i("div",{staticClass:"text d-flex justify-content-between align-items-center"},[i("span",{staticClass:"me-2"},[e._v(e._s(e.simplifyDate(e.value)))]),i("b-icon",{staticClass:"cursor-pointer",attrs:{icon:"pencil-square"},on:{click:function(t){return e.showChangeInput(!0)}}})],1),e.editing?i("b-card",{staticClass:"edit-popup shadow",attrs:{"no-body":""}},[i("b-card-header",{staticClass:"d-flex justify-content-between align-items-center"},[i("div",{staticClass:"me-4"},[e._v("Редактирование")]),i("div",[i("b-button",{staticClass:"pill-equal-padding me-2",attrs:{variant:"success",disabled:!e.isSelectedDate,pill:""},on:{click:e.updateField}},[i("b-icon",{attrs:{icon:"check"}})],1),i("b-button",{staticClass:"pill-equal-padding",attrs:{variant:"danger",pill:""},on:{click:function(t){return e.showChangeInput(!1)}}},[i("b-icon",{attrs:{icon:"x"}})],1)],1)]),i("b-input-group",[i("b-form-input",{staticClass:"border-white",attrs:{type:"text",placeholder:"ДД.ММ.ГГГГ",autocomplete:"off"},model:{value:e.dateEditInput,callback:function(t){e.dateEditInput=t},expression:"dateEditInput"}}),i("b-input-group-append",[i("b-form-datepicker",{attrs:{"button-only":"",right:"",locale:"ru-RU"},on:{context:e.onContext,shown:e.onDatePickerShown,hidden:e.onDatePickerHidden},model:{value:e.convertedDate,callback:function(t){e.convertedDate=t},expression:"convertedDate"}})],1)],1)],1):e._e()],1):i("div",[i("b-form-datepicker",{attrs:{placeholder:"Выберите дату",locale:"ru-RU","hide-header":!0,readonly:e.readOnly},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1)])},L=[],N=(i("a15b"),i("ac1f"),i("1276"),{props:["model","readOnly","value","isEditable","field","rowId"],data:function(){return{input:"",editing:!1,selected:"",dateEditInput:""}},methods:{showChangeInput:function(e){e||(this.input=this.value),this.dateEditInput=this.simplifiedDate,this.editing=e},onContext:function(e){this.selected=e.selectedYMD},onDatePickerShown:function(){document.querySelector("#table").parentElement.style.minHeight="500px"},onDatePickerHidden:function(){document.querySelector("#table").parentElement.style.minHeight="unset"},updateField:function(){var e={field:this.field,value:this.input};this.$emit("updateField",{id:this.rowId,fields:e}),this.showChangeInput(!1)},simplifyDate:function(e){return new Date(e).toLocaleDateString("ru-RU")}},computed:{isSelectedDate:function(){return!!this.selected},simplifiedDate:function(){var e=this.input?this.input:"12.12.1999";return this.simplifyDate(e)},convertedDate:{get:function(){return this.simplifiedDate.split(".").reverse().join("-")},set:function(e){this.input=e}}},mounted:function(){this.value&&(this.input=this.value)},watch:{input:function(e){if(null===this||void 0===this||!this.isEditable){var t={field:this.model,value:e};this.$emit("updateField",{id:-1,fields:t})}},dateEditInput:function(e){var t=e.split(".").reverse().join("-"),i=new Date(t);i instanceof Date&&!isNaN(i.valueOf())?this.input=t:(console.log("NOT OK:",t),this.selected="")}}}),q=N,G=Object(b["a"])(q,B,L,!1,null,null,null),H=G.exports,K=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.isEditable?i("div",{staticClass:"position-relative"},[i("div",{staticClass:"text d-flex align-items-center"},[i("span",{staticClass:"me-2"},[e._v(e._s(e.value))]),i("b-icon",{staticClass:"cursor-pointer",attrs:{icon:"pencil-square"},on:{click:function(t){return e.showChangeInput(!0)}}})],1),e.editing?i("b-card",{staticClass:"edit-popup shadow",attrs:{"no-body":""}},[i("b-card-header",{staticClass:"d-flex justify-content-between align-items-center"},[i("div",{staticClass:"me-4"},[e._v("Редактирование")]),i("div",[i("b-button",{staticClass:"pill-equal-padding me-2",attrs:{variant:"success",pill:""},on:{click:e.updateField}},[i("b-icon",{attrs:{icon:"check"}})],1),i("b-button",{staticClass:"pill-equal-padding",attrs:{variant:"danger",pill:""},on:{click:function(t){return e.showChangeInput(!1)}}},[i("b-icon",{attrs:{icon:"x"}})],1)],1)]),"textarea"==e.fieldType?i("b-form-textarea",{staticClass:"border-white",style:e.width?"min-width:"+e.width+"px":"",attrs:{type:"text",rows:"3","max-rows":"6",value:e.input},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}}):i("b-form-input",{staticClass:"border-white",style:e.width?"min-width:"+e.width+"px":"",attrs:{type:"text",placeholder:"Введите текст",value:e.input},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1):e._e()],1):i("span",[e._v(" "+e._s(e.value)+" ")])])},Y=[],J={props:["value","isEditable","field","rowId","readOnly","width","fieldType"],data:function(){return{input:"",editing:!1}},methods:{showChangeInput:function(e){this.input=this.value,this.editing=e},updateField:function(){var e={field:this.field,value:this.input};this.$emit("updateField",{id:this.rowId,fields:e}),this.showChangeInput(!1)}},watch:{input:function(e){if(null===this||void 0===this||!this.isEditable){var t={field:this.model,value:e};this.$emit("updateField",{id:-1,fields:t})}}}},W=J,z=Object(b["a"])(W,K,Y,!1,null,null,null),Q=z.exports,V=i("46c2"),X={components:{BooleanField:I,FloatField:P,IntField:A,DateField:H,TextField:Q,ChangeFieldModal:f["a"],DeleteRowBtn:V["a"]},props:["parent","itemsData","fieldsData","isBusy","filter","perPage","currentPage","name"],data:function(){return{SDesc:!1}},computed:{localFields:function(){var e=this;return this.parent?this.fieldsData.list.filter((function(t){return t.key!=e.parent})):this.fieldsData.list}},methods:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(o["b"])(["deleteRow"])),Object(o["d"])(["updateTableItem"])),{},{onUpdateField:function(e){var t=e.id,i=e.fields,n=i.field,a=i.value;console.log("[upd]",this.name,t,n,a),this.updateTableItem({collection:this.name,id:t,field:n,value:a})},onDeleteRow:function(e){this.deleteRow({table_name:this.name,row_id:e})},getFieldById:function(e,t,i){return this.fieldsData.models[t]?this.fieldsData.models[t].find((function(t){return t.id==e}))[i]:""}})},Z=X,ee=Object(b["a"])(Z,y,w,!1,null,null,null),te=ee.exports,ie=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-pagination",{attrs:{"total-rows":e.rows,"per-page":e.perPage,"first-number":"","last-number":"","aria-controls":"table"},model:{value:e.currentPageLocal,callback:function(t){e.currentPageLocal=t},expression:"currentPageLocal"}})},ne=[],ae={props:["rows","perPage","currentPage"],data:function(){return{currentPageLocal:this.currentPage}},watch:{currentPage:function(e){this.currentPageLocal=e},currentPageLocal:function(e){this.$emit("pageChange",e)}}},le=ae,se=Object(b["a"])(le,ie,ne,!1,null,null,null),re=se.exports,oe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.readOnly?i("b-button",{attrs:{variant:"primary"}},[e._v(" Импорт ")]):i("add-new-row",{attrs:{parent:e.parent,parentId:e.parentId,fields:e.fields,fieldsModels:e.fieldsModels,title:"Добавление записи"},on:{addNewRow:e.onAddNewRow}})],1)},de=[],ce=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("b-button",{attrs:{variant:"primary"},on:{click:function(t){return e.showAddModal(t.target)}}},[e._v(" Добавить ")]),i("b-modal",{attrs:{id:e.addModal.id,title:e.addModal.title,centered:""},on:{hide:e.resetAddModal},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var n=t.ok,a=t.cancel;return[i("b-button",{attrs:{variant:"danger"},on:{click:function(e){return a()}}},[e._v(" Отмена ")]),i("b-button",{attrs:{variant:"success"},on:{click:function(t){return e.addNewRow(n)}}},[e._v(" OK ")])]}}])},e._l(e.localFields,(function(t){return i("b-row",{key:t.id,staticClass:"py-2"},["actions"!=t.key?i("b-col",{staticClass:"position-relative d-flex align-items-center"},[i("label",{staticClass:"mb-0"},[e._v(e._s(t.label)+":")])]):e._e(),"actions"!=t.key?i("b-col",{attrs:{cols:"8"}},[t.type&&"selectable"==t.type?i("change-field-modal",{ref:"change-field-"+t.key,refInFor:!0,attrs:{rowId:"-1",label:"Не выбрано",model:t.key,items:e.fieldsModels[t.key],"no-truncate":!0},on:{updateField:e.onUpdateField,labelChange:e.onLabelChange}}):t.type&&"float"==t.type?i("float-field",{attrs:{model:t.key},on:{updateField:e.onUpdateField}}):t.type&&"integer"==t.type?i("int-field",{attrs:{model:t.key},on:{updateField:e.onUpdateField}}):t.type&&"boolean"==t.type?i("boolean-field",{attrs:{model:t.key},on:{updateField:e.onUpdateField}}):t.type&&"date"==t.type?i("date-field",{attrs:{model:t.key},on:{updateField:e.onUpdateField}}):i("b-form-input",{attrs:{placeholder:"Введите текст"},model:{value:e.addModal.fields[t.key],callback:function(i){e.$set(e.addModal.fields,t.key,i)},expression:"addModal.fields[field.key]"}})],1):e._e()],1)})),1)],1)},ue=[],pe=(i("159b"),i("b64b"),i("54c2")),fe={components:{ChangeFieldModal:f["a"],FloatField:P,IntField:A,BooleanField:I,DateField:H},props:["title","fields","fieldsModels","parent","parentId"],data:function(){return{API:new pe["a"](this),addModal:{id:"add-row-modal",title:this.title,fields:{}}}},computed:{localFields:function(){var e=this;return this.parent?this.fields.filter((function(t){return t.key!=e.parent})):this.fields}},methods:{showAddModal:function(e){this.$bvModal.show(this.addModal.id,e)},resetAddModal:function(){for(var e in this.addModal.fields)this.addModal.fields[e]="",delete this.addModal.fields[e]},onLabelChange:function(e){var t=e.id,i=e.model;this.$refs["change-field-".concat(i)][0].labelReplacement=this.getFieldById(t,i,"name")},onUpdateField:function(e){e._id;var t=e.fields;this.$set(this.addModal.fields,t.field,t.value)},addNewRow:function(e){var t=this,i={};Object.keys(this.addModal.fields).forEach((function(e){i[e]=t.addModal.fields[e]})),this.parent&&(i[this.parent]=this.parentId),this.$emit("addNewRow",i),e()},getFieldById:function(e,t,i){return this.fieldsModels[t].find((function(t){return t.id==e}))[i]}}},he=fe,me=Object(b["a"])(he,ce,ue,!1,null,null,null),be=me.exports,ge={components:{AddNewRow:be},props:["parent","parentId","readOnly","fields","fieldsModels"],methods:{onAddNewRow:function(e){this.$emit("addNewRow",e)}}},ve=ge,ye=Object(b["a"])(ve,oe,de,!1,null,null,null),we=ye.exports,xe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[0==e.items.list.length?i("h5",[e._v("Нет доступных записей!")]):i("b-card",{staticClass:"mb-4",attrs:{header:"Выберите из списка"}},e._l(e.items.list,(function(t){return i("b-form-checkbox",{key:t.id,attrs:{checked:t.checked},on:{change:function(i){return e.changeSelection(i,t.id)}}},[e._v(" "+e._s(t.name)+" ")])})),1)],1)},ke=[],_e={props:["items","fields","id","name"],data:function(){return{parent_id:this.id,child_table:this.fields.list[0].key,parent_table:this.fields.list[1].key}},methods:Object(r["a"])(Object(r["a"])({},Object(o["b"])(["updateSelection"])),{},{changeSelection:function(e,t){this.updateSelection({collection:this.name,parent:this.parent_table,parent_id:this.parent_id,child:this.child_table,child_id:t,value:e})}})},Fe=_e,Ce=Object(b["a"])(Fe,xe,ke,!1,null,null,null),Ie=Ce.exports,De=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[0==e.items.list.length?i("h5",[e._v("Нет доступных записей!")]):e._l(e.radioGroups,(function(t,n){return i("b-card",{key:n,staticClass:"mb-4",attrs:{header:e.getGroupTitle(n)}},[i("b-form-group",{staticClass:"mb-0"},[i("RadioGroupElement",{attrs:{id:e.id,name:e.name,group:t,index:n,selection:e.groupSelections[n],parent:e.parent_table,child:e.child_table}})],1)],1)}))],2)},Ee=[],Oe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-form-radio-group",{attrs:{stacked:""},on:{change:function(t){return e.changeSelection(t,e.group[e.index].work_stage)}},model:{value:e.localSelection,callback:function(t){e.localSelection=t},expression:"localSelection"}},e._l(e.group,(function(t){return i("b-form-radio",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)},Re=[],je={props:["id","name","group","index","selection","parent","child"],data:function(){return{localSelection:this.selection,prev:null,current:null}},methods:Object(r["a"])(Object(r["a"])({},Object(o["b"])(["updateRadioSelection"])),{},{changeSelection:function(e,t){console.log("[changeSelection() radio update]",e,t),this.updateRadioSelection({collection:this.name,parent:this.parent,parent_id:this.id,child:this.child,child_id:this.id,prev:this.prev,current:this.current})}}),watch:{localSelection:function(e,t){this.prev=t,this.current=e}}},Pe=je,Se=Object(b["a"])(Pe,Oe,Re,!1,null,null,null),Me=Se.exports,$e={props:["items","groupField","fields","id","name"],components:{RadioGroupElement:Me},data:function(){return{parent_id:this.id,parent_table:this.fields.list[0].key,child_table:this.fields.list[1].key}},methods:Object(r["a"])(Object(r["a"])({},Object(o["b"])(["getGroupTitles"])),{},{getGroupTitle:function(e){var t=this;return this.groupTitles.filter((function(i){return i.id==t.groupSelections[e]}))[0]["name"]}}),computed:Object(r["a"])(Object(r["a"])({},Object(o["c"])(["groupTitles"])),{},{radioGroups:function(){var e=[];return this.items.list.forEach((function(t){e[t.work_stage]||(e[t.work_stage]=[{id:-1,name:"Не выбрано",work_stage:t.work_stage}]),e[t.work_stage].push(t)})),e.filter(Boolean)},groupSelections:function(){for(var e=[],t=0;t<this.radioGroups.length;t++){var i=this.radioGroups[t].filter((function(e){return 1==e.checked})),n=0==i.length?-1:i[0].id;e[t]=n}return e}}),mounted:function(){this.getGroupTitles({collection:this.groupField})}},Te=$e,Ue=Object(b["a"])(Te,De,Ee,!1,null,null,null),Ae=Ue.exports,Be={components:{Title:d["a"],SearchBar:c["a"],Filters:v,Table:te,Pagination:re,AddDataBtn:we,SelectGroup:Ie,RadioGroup:Ae},props:["name","id","parent"],data:function(){return{searchFilter:null,perPage:10,currentPage:1,isReadOnly:!1}},computed:Object(r["a"])(Object(r["a"])({},Object(o["c"])(["title","parent_name","mode","groupField","isBusy","isFiltered","itemsData","fieldsData","selectableFields","itemRowsLength","filtersData","filterParams"])),{},{localTitle:function(){return"many_to_many"===this.mode&&this.parent?(this.getParentNameById({table_name:this.parent,id:this.id}),"".concat(this.title.substring(0,this.title.lastIndexOf(" "))," ").concat(this.parent_name)):this.title},compiledParams:function(){var e={};return null!==this&&void 0!==this&&this.parent&&(e=Object(s["a"])({},this.parent,this.id)),null!=this.mode&&(e["mode"]=this.mode,e["child"]=this.fieldsData.list[0].key),null!=this.groupField&&(e["child"]=this.fieldsData.list[1].key),e}}),methods:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(o["b"])(["getItems","getFieldsModels","getFiltersItems","resetFiltersFromId","getTableInfo","applyFilters","addNewRow","getParentNameById"])),Object(o["d"])(["updateFieldsList","resetItemsActions","updateItemsActions","resetFiltersModel","updateFiltersModel","resetFilterState","addTableItem","updateObj","updateFilterLabel"])),{},{onApplyFilters:function(e){e._id;var t=e.fields;this.applyFilters(t),this.getItems({name:[this.name],params:this.filterParams})},resetFilters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.resetFiltersFromId(e);var t=this.compiledParams;0!=e&&(t=Object(r["a"])(Object(r["a"])({},t),this.filterParams)),this.getItems({name:[this.name],params:t})},onResetFilters:function(e){this.resetFilters(e)},onFilterChange:function(e){this.searchFilter=e},onFilterLabelChange:function(e){var t=e.itemId,i=e.model;this.updateFilterLabel({itemId:t,model:i})},onPageChange:function(e){this.currentPage=e},onAddNewRow:function(e){this.resetFilters(0),this.addNewRow({table_name:this.name,row:e})},init:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=function(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},e.searchFilter=null,t.next=4,e.getTableInfo({name:e.name});case 4:e.getItems({name:e.name,params:e.compiledParams}),n=document.querySelector(".table-responsive"),null!=n&&setTimeout((function(){i(n)?(n.classList.remove("b-table-sticky-header"),n.style.maxHeight="unset"):(n.classList.add("b-table-sticky-header"),n.style.maxHeight="500px")}),500);case 7:case"end":return t.stop()}}),t)})))()}}),mounted:function(){this.init()},watch:{name:function(){this.init()}}},Le=Be,Ne=Object(b["a"])(Le,n,a,!1,null,null,null);t["default"]=Ne.exports},"8aa5":function(e,t,i){"use strict";var n=i("6547").charAt;e.exports=function(e,t,i){return t+(i?n(e,t).length:1)}},9263:function(e,t,i){"use strict";var n=i("c65b"),a=i("e330"),l=i("577e"),s=i("ad6d"),r=i("9f7f"),o=i("5692"),d=i("7c73"),c=i("69f3").get,u=i("fce3"),p=i("107c"),f=o("native-string-replace",String.prototype.replace),h=RegExp.prototype.exec,m=h,b=a("".charAt),g=a("".indexOf),v=a("".replace),y=a("".slice),w=function(){var e=/a/,t=/b*/g;return n(h,e,"a"),n(h,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),x=r.BROKEN_CARET,k=void 0!==/()??/.exec("")[1],_=w||k||x||u||p;_&&(m=function(e){var t,i,a,r,o,u,p,_=this,F=c(_),C=l(e),I=F.raw;if(I)return I.lastIndex=_.lastIndex,t=n(m,I,C),_.lastIndex=I.lastIndex,t;var D=F.groups,E=x&&_.sticky,O=n(s,_),R=_.source,j=0,P=C;if(E&&(O=v(O,"y",""),-1===g(O,"g")&&(O+="g"),P=y(C,_.lastIndex),_.lastIndex>0&&(!_.multiline||_.multiline&&"\n"!==b(C,_.lastIndex-1))&&(R="(?: "+R+")",P=" "+P,j++),i=new RegExp("^(?:"+R+")",O)),k&&(i=new RegExp("^"+R+"$(?!\\s)",O)),w&&(a=_.lastIndex),r=n(h,E?i:_,P),E?r?(r.input=y(r.input,j),r[0]=y(r[0],j),r.index=_.lastIndex,_.lastIndex+=r[0].length):_.lastIndex=0:w&&r&&(_.lastIndex=_.global?r.index+r[0].length:a),k&&r&&r.length>1&&n(f,r[0],i,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r&&D)for(r.groups=u=d(null),o=0;o<D.length;o++)p=D[o],u[p[0]]=r[p[1]];return r}),e.exports=m},"9f7f":function(e,t,i){var n=i("d039"),a=i("da84"),l=a.RegExp,s=n((function(){var e=l("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),r=s||n((function(){return!l("a","y").sticky})),o=s||n((function(){var e=l("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:o,MISSED_STICKY:r,UNSUPPORTED_Y:s}},a15b:function(e,t,i){"use strict";var n=i("23e7"),a=i("e330"),l=i("44ad"),s=i("fc6a"),r=i("a640"),o=a([].join),d=l!=Object,c=r("join",",");n({target:"Array",proto:!0,forced:d||!c},{join:function(e){return o(s(this),void 0===e?",":e)}})},ac1f:function(e,t,i){"use strict";var n=i("23e7"),a=i("9263");n({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},ad6d:function(e,t,i){"use strict";var n=i("825a");e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},d784:function(e,t,i){"use strict";i("ac1f");var n=i("e330"),a=i("6eeb"),l=i("9263"),s=i("d039"),r=i("b622"),o=i("9112"),d=r("species"),c=RegExp.prototype;e.exports=function(e,t,i,u){var p=r(e),f=!s((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),h=f&&!s((function(){var t=!1,i=/a/;return"split"===e&&(i={},i.constructor={},i.constructor[d]=function(){return i},i.flags="",i[p]=/./[p]),i.exec=function(){return t=!0,null},i[p](""),!t}));if(!f||!h||i){var m=n(/./[p]),b=t(p,""[e],(function(e,t,i,a,s){var r=n(e),o=t.exec;return o===l||o===c.exec?f&&!s?{done:!0,value:m(t,i,a)}:{done:!0,value:r(i,t,a)}:{done:!1}}));a(String.prototype,e,b[0]),a(c,p,b[1])}u&&o(c[p],"sham",!0)}},fce3:function(e,t,i){var n=i("d039"),a=i("da84"),l=a.RegExp;e.exports=n((function(){var e=l(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))}}]);
//# sourceMappingURL=dict.6e867b5c.js.map